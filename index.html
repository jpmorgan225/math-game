<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multiplication</title>
  <link rel="stylesheet" href="exo3.css"/>
</head>
<body>

<div id="accueil">
  <h1>Bienvenue dans le jeu</h1>
  <p>Règles du jeu :</p>
  <ul>
    <li>Vous devez résoudre des additions dans un temps limité.</li>
    <li>Chaque bonne réponse vous fait gagner 5 points.</li>
    <li>Atteignez 50 points pour passer au niveau suivant.</li>
    <li>Si le temps expire, vous perdez du temps.</li>
  </ul>
  <button id="startButton">Commencer</button>
</div>

<div id="jeu" class="hidden">
  <div class="container">
    <p class="first">5</p>
    <p>+</p>
    <p class="second">6</p>
    <p>=</p>
    <input type="number" placeholder=".">
    <p class="score">Score: 0</p>
    <p class="niveau">Niveau: 1</p>
    <p class="chrono">0</p>
  </div>
</div>

<script>const n1 = document.querySelector("p.first");
  const n2 = document.querySelector("p.second");
  const input = document.querySelector("input");
  const startButton = document.getElementById("startButton");
  const accueil = document.getElementById("accueil");
  const jeu = document.getElementById("jeu");
  
  let result = 0;
  let scoreValue = 0;
  let currentLevel = 1;
  let inter;
  
  const levels = {
    1: { min: 0, max: 9, time: 7 },
    2: { min: 5, max: 20, time: 5 },
    3: { min: 7, max: 22, time: 10 },
    4: { min: 9, max: 25, time: 20 },
    5: { min: 10, max: 26, time: 25 }
  };
  
  let level = levels[currentLevel];
  
  const randomNumber = (max, min = 0) => Math.floor((Math.random() * (max - min)) + min);
  
  const update = () => {
    let num1 = randomNumber(level.max, level.min);
    let num2 = randomNumber(level.max, level.min);
    result = num1 + num2;
    n1.textContent = num1;
    n2.textContent = num2;
    document.querySelector('.score').textContent = `Score: ${scoreValue} points`;
  };
  
  startButton.addEventListener("click", () => {
    accueil.style.display = "none";
    jeu.style.display = "flex";
    update();
    chrono();
  });
  
  input.addEventListener("keyup", (e) => {
    const value = parseInt(e.target.value);
    
    if (value === result) {
      clearInterval(inter);
      e.target.value = "";
      scoreValue += 5;
      
      if (scoreValue >= 50) {
        currentLevel += 1;
        
        if (currentLevel > 5) {
          alert("Vous avez terminé le jeu !");
          currentLevel = 1;
          scoreValue = 0;
        }
  
        level = levels[currentLevel];
        document.querySelector('.niveau').textContent = `Niveau: ${currentLevel}`;
        scoreValue = 0;
      }
  
      update();
      chrono();
    }
  });
  
  let chrono = () => {
    let count = level.time;
    document.querySelector(".chrono").textContent = count;
  
    inter = setInterval(() => {
      count--;
      document.querySelector(".chrono").textContent = count;
  
      if (count <= 0) {
        clearInterval(inter);
        
        if (scoreValue === 0) {
          alert("Vous avez perdu !");
          scoreValue = 0;
        } else {
          scoreValue -= 5;
        }
  
        update();
        chrono();
      }
    }, 1000);
  };
  </script>
</body>
</html>
